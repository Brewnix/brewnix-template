# Site Configuration for Site1
# This file contains site-specific configuration variables

# Basic site information
SITE_NAME="site1"
SITE_DISPLAY_NAME="Primary Home Network"
NETWORK_PREFIX="10.1"
DOMAIN="home.local"

# Proxmox host configuration
PROXMOX_HOST="10.1.50.1"
STAGING_PROXMOX_HOST="10.1.50.1"  # Same as production for this example
PRODUCTION_PROXMOX_HOST="10.1.50.1"

# Hardware configuration
CPU_MODEL="n100"
MEMORY_GB="16"
STORAGE_TYPE="ssd"
STORAGE_SIZE="256"

# Network configuration
VLAN_MAIN="10"
VLAN_CAMERAS="20"
VLAN_IOT="30"
VLAN_GUEST="40"
VLAN_MANAGEMENT="50"

# Services configuration
OPNSENSE_VERSION="23.7"
OMADA_VERSION="5.9"
TAILSCALE_ENABLED="true"
SURICATA_ENABLED="true"
ZEEK_ENABLED="false"

# Device configurations (MAC addresses)
HOME_ASSISTANT_MAC="00:11:22:33:44:55"
NAS_MAC="aa:bb:cc:dd:ee:ff"
NVR_MAC="11:22:33:44:55:66"
OMADA_MAC="aa:bb:cc:dd:ee:ff"

# Backup configuration
BACKUP_RETENTION_DAILY="7"
BACKUP_RETENTION_WEEKLY="30"
BACKUP_RETENTION_MONTHLY="90"
BACKUP_RETENTION_YEARLY="365"

# Monitoring configuration
MONITORING_ENABLED="true"
LOG_RETENTION_DAYS="30"
ALERT_EMAIL="admin@home.local"

# VPN configuration
TAILSCALE_NETWORK="100.64.0.0/10"
VPN_TYPE="tailscale"  # options: tailscale, headscale, netbird

# DNS configuration
LOCAL_DNS_ENABLED="true"
UPSTREAM_DNS="8.8.8.8,8.8.4.4"
DNS_DOMAIN="home.local"

# Security settings
SSH_PASSWORD_AUTH="false"
ROOT_LOGIN_ALLOWED="true"
FIREWALL_DEFAULT_POLICY="block"
IDS_ENABLED="true"
IPS_ENABLED="false"

# Update configuration
AUTO_UPDATES_ENABLED="true"
UPDATE_WINDOW_START="02:00"
UPDATE_WINDOW_END="04:00"
UPDATE_DAYS="mon,wed,fri"

# Environment-specific overrides
if [[ "$ENVIRONMENT" == "staging" ]]; then
    NETWORK_PREFIX="10.101"
    DOMAIN="staging.home.local"
fi

# Configuration validation
REQUIRED_VARS=(
    SITE_NAME
    NETWORK_PREFIX
    DOMAIN
    PROXMOX_HOST
)

for var in "${REQUIRED_VARS[@]}"; do
    if [[ -z "${!var}" ]]; then
        echo "ERROR: Required variable $var is not set"
        exit 1
    fi
done
